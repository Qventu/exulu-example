{"version":3,"sources":["../src/contexts/context.ts","../src/embedders/embedder.ts","../src/contexts/index.ts","../src/agents/agent.ts","../src/tools/tool.ts","../src/tools/index.ts","../exulu.ts","../server.ts"],"sourcesContent":["import { ExuluContext } from \"@exulu/backend\";\nimport { exampleEmbedder } from \"../embedders/embedder\";\n\nconst exampleContext = new ExuluContext({\n    id: \"example_context\",\n    name: \"Example context\",\n    description: \"Example context\",\n    embedder: exampleEmbedder,\n    active: true,\n    configuration: {\n        calculateVectors: \"always\"\n    },\n    fields: [\n        {\n            name: \"json\",\n            type: \"json\"\n        }\n    ],\n})\n\nexport { exampleContext };","import { ExuluChunkers, ExuluEmbedder } from \"@exulu/backend\";\nimport { openai } from '@ai-sdk/openai';\nimport { embedMany } from 'ai';\n\nexport const exampleEmbedder = new ExuluEmbedder({\n  id: \"example_embedder\",\n  name: \"Example embedder\",\n  description: \"OpenAI text embedder small.\",\n  vectorDimensions: 1536,\n  maxChunkSize: 500,\n  queue: undefined,\n  chunker: async (inputs, maxChunkSize) => {\n\n    if (!inputs.description) {\n      return {\n        item: inputs,\n        chunks: []\n      }\n    }\n\n    const content = inputs.description;\n\n    const chunker = await ExuluChunkers.sentence.create({\n      tokenizer: \"gpt-3.5-turbo\", // Supports string identifiers or Tokenizer instance\n      chunkSize: maxChunkSize,            // Maximum tokens per chunk\n      chunkOverlap: maxChunkSize / 2,         // Overlap between chunks\n      minSentencesPerChunk: 1    // Minimum sentences per chunk\n    });\n\n    const chunks = await chunker.chunk(content);\n\n    console.log(\"chunks\", chunks)\n    return {\n      item: inputs,\n      chunks: chunks.map((chunk, index) => ({\n        content: chunk.text,\n        index,\n      }))\n    }\n\n  },\n  generateEmbeddings: async (inputs) => {\n\n    const { item } = inputs;\n\n    // 'embeddings' is an array of embedding objects (number[][]).\n    // It is sorted in the same order as the input values.\n    const { embeddings } = await embedMany({\n      model: openai.textEmbeddingModel('text-embedding-3-small'),\n      values: inputs.chunks.map((chunk) => chunk.content)\n    });\n\n    return {\n      id: item.id,\n      chunks: embeddings.map((vector, index) => ({\n        content: inputs.chunks[index]?.content || \"\",\n        index,\n        vector\n      }))\n    }\n\n  }\n})\n\nexport default exampleEmbedder;","import { exampleContext } from \"./context\";\n\nexport const contexts = {\n    exampleContext\n}","import { ExuluAgent } from \"@exulu/backend\";\nimport { createOpenAI } from \"@ai-sdk/openai\";\n\nconst exampleAgent = new ExuluAgent({\n    id: \"example_agent\",\n    name: \"Example Agent\",\n    provider: \"openai\",\n    description: \"Description of example agent.\",\n    type: \"agent\",\n    capabilities: {\n        text: true,\n        images: [],\n        files: [],\n        audio: [],\n        video: [],\n    },\n    config: {\n        name: \"example-agent\",\n        instructions: \"\",\n        model: {\n            create: ({ apiKey }) => {\n                const openai = createOpenAI({\n                    apiKey: apiKey,\n                })\n                return openai.languageModel(\"gpt-4o\")\n            },\n        }\n    }\n})\n\nexport default exampleAgent;","import { ExuluTool } from \"@exulu/backend\";\nimport { z } from \"zod\";\n\nconst exampleTool = new ExuluTool({\n    id: \"example_tool\",\n    name: \"Example Tool\",\n    description: \"Description of example tool.\",\n    inputSchema: z.object({\n        query: z.string().describe(\"The query to the tool.\"),\n    }),\n    type: \"function\",\n    config: [],\n    execute: async ({ query }: any) => {\n        // add logic here\n        console.log(query);\n        return {\n            result: \"Example tool result\",\n        }\n    },\n})\n\nexport default exampleTool;","import type { ExuluTool } from \"@exulu/backend\";\nimport exampleTool from \"./tool\";\nconst tools: ExuluTool[] = [\n    exampleTool\n]\n\nexport default tools;","import { contexts } from \"./src/contexts/index\";\nimport { exampleAgent } from \"./src/agents/index\";\nimport tools from \"./src/tools/index\";\nimport { ExuluApp } from \"@exulu/backend\";\n\nlet instance: ExuluApp | null = null;\nexport const exulu = async (): Promise<ExuluApp> => {\n\n    if (instance) {\n        return instance;\n    }\n    \n    instance = new ExuluApp();\n    instance = await instance.create({\n        config: {\n            telemetry: {\n                enabled: false,\n            },\n            fileUploads: {\n                s3region: process.env.COMPANION_S3_REGION as string,\n                s3key: process.env.COMPANION_S3_KEY as string,\n                s3secret: process.env.COMPANION_S3_SECRET as string,\n                s3Bucket: process.env.COMPANION_S3_BUCKET as string,\n                s3endpoint: process.env.COMPANION_S3_ENDPOINT as string,\n                s3prefix: process.env.COMPANION_S3_PREFIX as string,\n            },\n            workers: {\n                telemetry: {\n                    enabled: false,\n                },\n                enabled: true,\n            },\n            MCP: {\n                enabled: true,\n            }\n        },\n        contexts,\n        tools: [\n            ...tools\n        ],\n        agents: [\n            exampleAgent\n        ]\n    })\n    return instance;\n}","import { type Request, type Response } from \"express\";\nimport { exulu } from \"./exulu\";\n\nconst start = async () => {\n\n  const app = await exulu();\n  const server = await app.express.init();\n  \n  if (!server) {\n    throw new Error(\"Failed to create Exulu server.\");\n  }\n  server.get(\"/\", (req: Request, res: Response) => {\n    res.status(200).json({\n      message: \"Hello, welcome to the Exulu backend ❤️.\"\n    })\n    return;\n  });\n\n  server.listen(9001, () => {});\n}\nstart();"],"mappings":"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","names":["openai"]}